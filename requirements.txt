docker
docker-compose
localstack
awscli

-- Create Users table (referenced by all other tables)
CREATE TABLE users (
    user_id VARCHAR(36) PRIMARY KEY NOT NULL
    user_name VARCHAR(255) NOT NULL
    user_email VARCHAR(255) NOT NULL UNIQUE,
);

-- Create Transaction Types table
CREATE TABLE transaction_types (
    user_id VARCHAR(36) NOT NULL,
    type_id VARCHAR(36) PRIMARY KEY NOT NULL,
    type_name VARCHAR(255) NOT NULL,
    type_description VARCHAR(255),
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);

-- Create Category table
CREATE TABLE category (
    user_id VARCHAR(36) NOT NULL,
    category_id VARCHAR(36) PRIMARY KEY,
    type_id VARCHAR(36) NOT NULL,
    category_name VARCHAR(255) NOT NULL,
    category_description VARCHAR(255),
    FOREIGN KEY (user_id) REFERENCES users(user_id),
    FOREIGN KEY (type_id) REFERENCES transaction_types(type_id)
);

-- Create Budget table
CREATE TABLE budget (
    user_id VARCHAR(36) NOT NULL,
    budget_id VARCHAR(36) PRIMARY KEY NOT NULL,
    budget_name VARCHAR(255) NOT NULL,
    budget_description VARCHAR(255),
    budget_target_amount INTEGER NOT NULL,
    budget_current_amount INTEGER DEFAULT 0,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);

-- Create Goals table
CREATE TABLE goals (
    user_id VARCHAR(36) NOT NULL,
    goal_id VARCHAR(36) PRIMARY KEY NOT NULL,
    goal_name VARCHAR(255) NOT NULL,
    goal_description VARCHAR(255),
    goal_target_amount INTEGER NOT NULL,
    goal_current_amount INTEGER DEFAULT 0 NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
);

-- Create Transactions table
CREATE TABLE transactions (
    user_id VARCHAR(36) NOT NULL,
    transaction_id VARCHAR(36) PRIMARY KEY NOT NULL,
    category_id VARCHAR(36) NOT NULL,
    type_id VARCHAR(36) NOT NULL,
    transaction_name VARCHAR(255) NOT NULL,
    transaction_description VARCHAR(255),
    transaction_amount INTEGER NOT NULL,
    transaction_date VARCHAR(50) NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE,
    FOREIGN KEY (category_id) REFERENCES category(category_id) ON DELETE CASCADE,
    FOREIGN KEY (type_id) REFERENCES transaction_types(type_id) ON DELETE CASCADE
);

-- Create search indexes for all ID fields grouped by table
-- Budget table indexes
CREATE INDEX idx_budget_ids ON budget(user_id, budget_id);
CREATE INDEX idx_budget_user_id ON budget(user_id);

-- Category table indexes
CREATE INDEX idx_category_ids ON category(user_id, category_id);
CREATE INDEX idx_category_user_id ON category(user_id);

-- Goals table indexes
CREATE INDEX idx_goals_ids ON goals(user_id, goal_id);
CREATE INDEX idx_goals_user_id ON goals(user_id);

-- Transactions table indexes
CREATE INDEX idx_transactions_ids ON transactions(user_id, transaction_id, category_id, type_id);
CREATE INDEX idx_transactions_user_id ON transactions(user_id);
CREATE INDEX idx_transactions_category_id ON transactions(category_id);
CREATE INDEX idx_transactions_type_id ON transactions(type_id);
CREATE INDEX idx_transactions_date ON transactions(transaction_date);

-- Transaction Types table indexes
CREATE INDEX idx_transaction_types_ids ON transaction_types(user_id, type_id);
CREATE INDEX idx_transaction_types_user_id ON transaction_types(user_id);

-- Users table index
CREATE INDEX idx_users_user_id ON users(user_id);